# Generated by Django 4.2.28 on 2026-02-06 02:53

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Academy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=50, unique=True)),
                ('name', models.CharField(max_length=100)),
                ('logo', models.CharField(help_text='Emoji logo', max_length=10)),
                ('description', models.TextField()),
                ('location', models.CharField(max_length=100)),
                ('is_partner', models.BooleanField(default=False, help_text='공인 파트너 기관')),
                ('website', models.URLField(blank=True)),
                ('order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': '교육 기관',
                'verbose_name_plural': '교육 기관',
                'ordering': ['-is_partner', 'order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Certification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True)),
                ('issuing_org', models.CharField(blank=True, help_text='발급 기관', max_length=100)),
            ],
            options={
                'verbose_name': '자격증',
                'verbose_name_plural': '자격증',
            },
        ),
        migrations.CreateModel(
            name='CourseTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
            ],
            options={
                'verbose_name': '과정 태그',
                'verbose_name_plural': '과정 태그',
            },
        ),
        migrations.CreateModel(
            name='Job',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(help_text='e.g., maint_01, ev_03', max_length=20, unique=True)),
                ('title', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('salary_min', models.IntegerField(help_text='최저 연봉 (만원)')),
                ('salary_max', models.IntegerField(help_text='최고 연봉 (만원)')),
                ('market_demand', models.CharField(choices=[('Explosive', '급상승'), ('High', '높음'), ('Stable', '안정'), ('Declining', '하락')], default='Stable', max_length=20)),
                ('req_tech', models.IntegerField(default=30, help_text='Tech 요구치')),
                ('req_hand', models.IntegerField(default=30, help_text='Hand 요구치')),
                ('req_speed', models.IntegerField(default=30, help_text='Speed/Ops 요구치')),
                ('req_art', models.IntegerField(default=30, help_text='Art 요구치')),
                ('req_biz', models.IntegerField(default=30, help_text='Biz 요구치')),
                ('hiring_companies', models.TextField(blank=True, help_text='채용 중인 회사들 (쉼표 구분)')),
                ('source', models.CharField(blank=True, help_text='데이터 출처', max_length=200)),
                ('is_starter', models.BooleanField(default=False, help_text='선행 조건 없는 입문 직업')),
                ('is_blue_ocean', models.BooleanField(default=False, help_text='고연봉 + 고수요 블루오션')),
                ('is_ev_transition', models.BooleanField(default=False, help_text='EV 전환 경로 직업')),
                ('order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': '직업',
                'verbose_name_plural': '직업',
                'ordering': ['group', 'order', 'title'],
            },
        ),
        migrations.CreateModel(
            name='JobGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(choices=[('Maintenance', '정비/메카닉'), ('Body', '외장/복원'), ('Film', '필름/튜닝'), ('EV_Future', '전기차/미래'), ('Management', '경영/서비스'), ('Niche', '특수/니치'), ('NextGen', '미래직업')], max_length=20, unique=True)),
                ('name', models.CharField(max_length=50)),
                ('color', models.CharField(default='#3b82f6', help_text='Hex color code', max_length=7)),
                ('icon', models.CharField(help_text='Emoji icon', max_length=10)),
                ('description', models.TextField(blank=True)),
                ('order', models.IntegerField(default=0)),
            ],
            options={
                'verbose_name': '직업 그룹',
                'verbose_name_plural': '직업 그룹',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='JobTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('color', models.CharField(default='#6b7280', max_length=7)),
            ],
            options={
                'verbose_name': '직업 태그',
                'verbose_name_plural': '직업 태그',
            },
        ),
        migrations.CreateModel(
            name='MechanicProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('tier', models.CharField(choices=[('Unranked', 'Unranked'), ('Bronze', 'Bronze'), ('Silver', 'Silver'), ('Gold', 'Gold'), ('Platinum', 'Platinum'), ('Diamond', 'Diamond')], default='Unranked', max_length=20)),
                ('xp', models.IntegerField(default=0)),
                ('years_experience', models.IntegerField(default=0)),
                ('stat_tech', models.IntegerField(default=10)),
                ('stat_hand', models.IntegerField(default=10)),
                ('stat_speed', models.IntegerField(default=10)),
                ('stat_art', models.IntegerField(default=10)),
                ('stat_biz', models.IntegerField(default=10)),
                ('avatar_url', models.URLField(blank=True, null=True)),
                ('current_salary', models.IntegerField(blank=True, help_text='현재 연봉 (만원)', null=True)),
                ('salary_proof_image', models.ImageField(blank=True, null=True, upload_to='salary_proofs/')),
                ('salary_verification_status', models.CharField(choices=[('None', '미인증'), ('Pending', '심사 중'), ('Verified', '인증 완료'), ('Rejected', '반려됨')], default='None', max_length=10)),
                ('salary_verified_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('current_job', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='current_holders', to='api.job')),
                ('target_job', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='target_seekers', to='api.job')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='mechanic_profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': '사용자 프로필',
                'verbose_name_plural': '사용자 프로필',
            },
        ),
        migrations.CreateModel(
            name='Post',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('Free', '자유게시판'), ('Tech', '기술 Q&A'), ('Salary', '연봉 대나무숲'), ('Career', '이직/커리어')], default='Free', max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('likes', models.IntegerField(default=0)),
                ('views', models.IntegerField(default=0)),
                ('comment_count', models.IntegerField(default=0)),
                ('show_verified_salary', models.BooleanField(default=False)),
                ('is_pinned', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='posts', to='api.mechanicprofile')),
                ('related_job', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='api.job')),
            ],
            options={
                'verbose_name': '게시글',
                'verbose_name_plural': '게시글',
                'ordering': ['-is_pinned', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Quest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('target_stat', models.CharField(choices=[('Tech', 'Tech (기술/진단)'), ('Hand', 'Hand (손기술)'), ('Speed', 'Speed (효율)'), ('Art', 'Art (예술성)'), ('Biz', 'Biz (경영)')], max_length=10)),
                ('stat_reward', models.IntegerField(default=2)),
                ('xp_reward', models.IntegerField(default=20)),
                ('icon', models.CharField(default='Wrench', max_length=50)),
                ('category', models.CharField(choices=[('Daily', '일일 미션'), ('Weekly', '주간 미션'), ('Challenge', '도전 과제'), ('Special', '특별 미션')], default='Daily', max_length=20)),
                ('requires_photo', models.BooleanField(default=True)),
                ('cooldown_hours', models.IntegerField(default=24)),
                ('max_daily_completions', models.IntegerField(default=1)),
                ('difficulty', models.IntegerField(default=1, help_text='1-5')),
                ('is_active', models.BooleanField(default=True)),
                ('order', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': '퀘스트',
                'verbose_name_plural': '퀘스트',
                'ordering': ['order', 'category'],
            },
        ),
        migrations.CreateModel(
            name='SuccessStory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('summary', models.TextField()),
                ('total_duration', models.CharField(help_text='e.g., 5년', max_length=50)),
                ('salary_change', models.CharField(help_text='e.g., 2,800 → 6,500만원 (+132%)', max_length=100)),
                ('key_lessons', models.JSONField(default=list, help_text='핵심 교훈 리스트')),
                ('is_verified', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='success_stories', to='api.mechanicprofile')),
                ('target_job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='success_stories', to='api.job')),
            ],
            options={
                'verbose_name': '성공 스토리',
                'verbose_name_plural': '성공 스토리',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StoryJourneyStep',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order', models.IntegerField(default=0)),
                ('duration', models.CharField(help_text='e.g., 2년, 현재', max_length=50)),
                ('salary', models.CharField(blank=True, help_text='e.g., 3,500만원', max_length=50)),
                ('job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.job')),
                ('story', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='journey_steps', to='api.successstory')),
            ],
            options={
                'verbose_name': '스토리 여정 단계',
                'verbose_name_plural': '스토리 여정 단계',
                'ordering': ['story', 'order'],
            },
        ),
        migrations.CreateModel(
            name='SalaryReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('current_salary', models.IntegerField(help_text='실제 연봉 (만원)')),
                ('estimated_salary', models.IntegerField(help_text='시장 가치 (만원)')),
                ('years_experience', models.IntegerField()),
                ('percentile', models.IntegerField(default=50, help_text='0-100 백분위')),
                ('user_stats', models.JSONField(default=dict)),
                ('proof_image', models.ImageField(blank=True, null=True, upload_to='salary_proofs/')),
                ('status', models.CharField(choices=[('None', '미인증'), ('Pending', '심사 중'), ('Verified', '인증 완료'), ('Rejected', '반려됨')], default='None', max_length=10)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('target_job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='salary_reports', to='api.job')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='salary_reports', to='api.mechanicprofile')),
            ],
            options={
                'verbose_name': '연봉 리포트',
                'verbose_name_plural': '연봉 리포트',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='QuestCompletion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('proof_image', models.ImageField(blank=True, null=True, upload_to='quest_proofs/')),
                ('notes', models.TextField(blank=True)),
                ('is_verified', models.BooleanField(default=True)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(auto_now_add=True)),
                ('profile', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quest_completions', to='api.mechanicprofile')),
                ('quest', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='completions', to='api.quest')),
            ],
            options={
                'verbose_name': '퀘스트 완료',
                'verbose_name_plural': '퀘스트 완료',
                'ordering': ['-completed_at'],
            },
        ),
        migrations.AddField(
            model_name='job',
            name='group',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='jobs', to='api.jobgroup'),
        ),
        migrations.AddField(
            model_name='job',
            name='prerequisites',
            field=models.ManyToManyField(blank=True, related_name='unlocks', to='api.job'),
        ),
        migrations.CreateModel(
            name='Course',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('category', models.CharField(choices=[('Maintenance', '정비'), ('Body', '외장/복원'), ('Tuning', '튜닝/커스텀'), ('EV_Future', '전기차/미래'), ('Management', '경영/관리')], max_length=20)),
                ('course_type', models.CharField(choices=[('Online', '온라인'), ('Offline', '오프라인'), ('Hybrid', '혼합')], max_length=20)),
                ('duration', models.CharField(help_text='e.g., 4주, 2일 (16시간)', max_length=50)),
                ('price', models.IntegerField(default=0, help_text='수강료 (만원), 0=무료')),
                ('price_note', models.CharField(blank=True, help_text='e.g., 국비지원 100%', max_length=100)),
                ('url', models.URLField(blank=True)),
                ('rating', models.DecimalField(blank=True, decimal_places=1, max_digits=2, null=True)),
                ('enroll_count', models.IntegerField(default=0, help_text='수강생 수')),
                ('order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('academy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='courses', to='api.academy')),
                ('target_jobs', models.ManyToManyField(blank=True, related_name='courses', to='api.job')),
            ],
            options={
                'verbose_name': '교육 과정',
                'verbose_name_plural': '교육 과정',
                'ordering': ['academy', 'order', 'title'],
            },
        ),
        migrations.CreateModel(
            name='Comment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField()),
                ('likes', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='api.mechanicprofile')),
                ('post', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='api.post')),
            ],
            options={
                'verbose_name': '댓글',
                'verbose_name_plural': '댓글',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='CareerReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('rating', models.IntegerField(default=4, help_text='1-5 rating')),
                ('years_in_role', models.IntegerField(default=1)),
                ('previous_job', models.CharField(blank=True, max_length=100)),
                ('salary_growth', models.CharField(blank=True, help_text='e.g., +50%, 2배', max_length=50)),
                ('pros', models.JSONField(default=list, help_text='장점 리스트')),
                ('cons', models.JSONField(default=list, help_text='단점 리스트')),
                ('advice', models.TextField(blank=True, help_text='후배에게 하는 조언')),
                ('helpful_count', models.IntegerField(default=0)),
                ('is_verified', models.BooleanField(default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='career_reviews', to='api.mechanicprofile')),
                ('job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='api.job')),
            ],
            options={
                'verbose_name': '커리어 리뷰',
                'verbose_name_plural': '커리어 리뷰',
                'ordering': ['-helpful_count', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ReviewHelpful',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='helpful_votes', to='api.careerreview')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.mechanicprofile')),
            ],
            options={
                'verbose_name': '리뷰 도움됨',
                'verbose_name_plural': '리뷰 도움됨',
                'unique_together': {('review', 'user')},
            },
        ),
        migrations.CreateModel(
            name='PostLike',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('post', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='post_likes', to='api.post')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.mechanicprofile')),
            ],
            options={
                'verbose_name': '좋아요',
                'verbose_name_plural': '좋아요',
                'unique_together': {('post', 'user')},
            },
        ),
        migrations.CreateModel(
            name='JobTagRelation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tag_relations', to='api.job')),
                ('tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.jobtag')),
            ],
            options={
                'verbose_name': '직업-태그 연결',
                'verbose_name_plural': '직업-태그 연결',
                'unique_together': {('job', 'tag')},
            },
        ),
        migrations.CreateModel(
            name='CourseTagRelation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tag_relations', to='api.course')),
                ('tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.coursetag')),
            ],
            options={
                'verbose_name': '과정-태그 연결',
                'verbose_name_plural': '과정-태그 연결',
                'unique_together': {('course', 'tag')},
            },
        ),
        migrations.CreateModel(
            name='CourseCertification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('certification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.certification')),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='certifications', to='api.course')),
            ],
            options={
                'verbose_name': '과정-자격증 연결',
                'verbose_name_plural': '과정-자격증 연결',
                'unique_together': {('course', 'certification')},
            },
        ),
    ]
